{% extends 'base.html' %}

{% load bootstrap3 %}

{% block content %}

{% load project_tags %}

<style>
.container-outer { overflow: scroll; width: 100%; height: 50%; }
.container-inner { width: 2100px; }
</style>

{# Load CSS and JavaScript #}
{% bootstrap_css %}
{% bootstrap_javascript %}

{# Display django.contrib.messages as Bootstrap alerts #}
{% bootstrap_messages %}

<h1>Finance Report</h1>
<h2>Projected annual costs</h2>
<div class="container-outer">
   <div class="container-inner">
	<table class="table table-striped table-hover">
		<thead class="thead-default">
		<tr>
			<th>Project</th>
			<th>Title</th>
			<th>PI</th>
			<th># users</th>
			<th>$</th>
			<th>Server size</th>
			<th>$</th>
			<th>Database</th>
			<th>$</th>
			<th>fileshare with replication</th>
			<th>$</th>
			<th>Direct attach</th>
			<th>$</th>
			<th>versioned backup</th>
			<th>$</th>
			<th>Software</th>
			<th>$</th>
			<th>Total Cost</th>
		</tr>
		</thead>
		
		{% for prj, swlist in prj_data %}
		<tr>
			<td><a href="{% url 'dc_management:project' prj.pk %}">{{ prj.dc_prj_id }}</a></td>
			<td>{{ prj.title }}</td>
			<td>{{ prj.pi }}</td>
			<td>{{ prj.users.all.count }}</td>
			<td>{{ prj.user_cost|account_format }}</td>
			<td>{{ prj.host.get_vm_size_display }}</td>
			<td>{{ prj.host_cost|account_format }}</td>
			<td>{{ prj.db }}</td>
			<td>{{ prj.db_cost|account_format }}</td>
			<td>{{ prj.fileshare_storage }} GB</td>
			<td>{{ prj.fileshare_cost|account_format }}</td>
			<td>{{ prj.direct_attach }}</td>
			<td>{{ prj.direct_attach_cost|account_format }}</td>
			<td>{{ prj.backup_storage }}</td>
			<td>{{ prj.backup_cost|account_format }}</td>
			
			<td>{% for sw in swlist %}
					{{ sw.0 }}</br>
				{% endfor %}
			</td>
			
			<td>{% for sw in swlist %}
					{{ sw.1|account_format }}</br>
				{% endfor %}
			</td>
			<td>{{ prj.project_total_cost|account_format }}</td>
		</tr>
		{% endfor %}
		
	</table>
   </div>
</div>


<a href="#" type="button" class="btn btn-default">Pro-rate to expected project completion</a>

{% if finance.comments %}
<h3>Comments</h3>
<p>{{ server.comments }}</p>
{% endif %}

{% endblock %}
 